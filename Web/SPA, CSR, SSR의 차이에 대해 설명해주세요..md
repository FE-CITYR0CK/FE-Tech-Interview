# SPA, CSR, SSR의 차이에 대해 설명해주세요.

<br/>

## 면접용

`SPA`는 최초 한 번 페이지 전체를 로딩한 후 데이터만 변경하여 사용하는 웹 애플리케이션으로, React, Vue로 주로 구현됩니다.

`CSR`은 초기에 최소한의 HTML과 JavaScript 파일만 받은 후, 브라우저에서 JavaScript를 실행하여 DOM을 동적으로 구성하는 방식입니다. CSR은 초기 로딩 속도가 느리고 SEO에 불리하지만, 이후 페이지 전환이 빠르고 사용자 인터랙션이 풍부한 장점이 있습니다. 

`SSR`은 서버에서 완성된 HTML을 생성하여 클라이언트에게 전송하는 방식으로, 초기 로딩이 빠르고 SEO에 유리하지만 페이지 전환마다 서버를 거쳐야 해서 사용자 경험이 저하될 수 있습니다.

SPA는 애플리케이션 구조의 개념이고, CSR과 SSR은 렌더링 방식의 개념입니다. 현대 웹 개발에서는 Next.js, Nuxt.js 같은 프레임워크를 통해 두 방식의 장점을 결합한 하이브리드 접근법이 인기를 얻고 있으며, SEO가 중요한 페이지는 SSR을, 인터랙션이 많은 페이지는 CSR을 선택적으로 적용합니다. 프로젝트 요구사항에 따라 적절한 렌더링 방식을 선택하는 것이 중요합니다.

[꼬리질문]

### **1. CSR과 SSR의 성능 차이를 어떻게 고려하여 선택해야 하나요?**

CSR은 초기 로딩이 느리지만 이후 페이지 전환이 빠르고 사용자 인터랙션이 원활합니다. 반면, SSR은 초기 로딩이 빠르고 SEO에 유리하지만 페이지 이동마다 서버 요청이 필요하여 부담이 커질 수 있습니다. 따라서, SEO가 중요한 페이지나 초기 렌더링 속도가 중요한 경우 SSR을 적용하고, 사용자와의 인터랙션이 많은 페이지는 CSR을 활용하는 것이 일반적입니다. 

### **2. SPA에서 SSR을 적용하면 MPA처럼 동작하게 되나요?**

완전히 MPA처럼 동작하지는 않지만, SSR을 사용하면 MPA와 유사한 성능 특성을 가질 수 있습니다.

SPA에서 SSR을 적용할 경우, 초기 페이지는 서버에서 렌더링된 HTML을 제공하고 이후의 페이지 전환은 CSR 방식으로 진행하는 방식이 일반적입니다.이렇게 하면 첫 페이지 로딩 속도를 빠르게 하면서도 이후 페이지 전환 시 SPA의 장점을 유지할 수 있습니다.즉, SPA에서 SSR을 활용하더라도 CSR을 함께 사용하여 SPA의 특성을 유지할 수 있으며, 프로젝트의 요구사항에 따라 SSR과 CSR을 적절히 조합하는 것이 중요합니다.

### 3.CSR 방식에서 SEO 문제를 개선할 수 있는 방법은 무엇인가요?

CSR은 검색 엔진이 JavaScript를 실행하여 콘텐츠를 렌더링하기 전까지는 빈 HTML만 볼 수 있어 SEO에 불리합니다. 이를 개선하기 위한 방법으로는

1. **프리렌더링**: 빌드 시점에 각 페이지의 HTML 스냅샷을 생성하여 초기 요청 시 제공함으로써 검색 엔진이 콘텐츠를 인덱싱할 수 있게 합니다.
2. **서버 사이드 렌더링 일부 도입**: Next.js나 Nuxt.js와 같은 프레임워크를 활용하여 SEO가 중요한 특정 페이지만 SSR로 구현할 수 있습니다.
3. **동적 렌더링**: 사용자 에이전트에 따라 검색 엔진에는 서버에서 렌더링된 HTML을, 일반 사용자에게는 CSR 방식을 제공하는 접근법입니다.

최근에는 Google과 같은 주요 검색 엔진이 JavaScript 렌더링 능력이 향상되었지만, 여전히 이런 최적화 기법을 적용하는 것이 안전하고 효과적입니다.

<br/>
<hr/>
<br/>

## 개념 설명
### **SPA - 단일 페이지 애플리케이션**

SPA는 하나의 HTML 파일을 기반으로 동적으로 화면을 변경하면서 동작하는 웹 애플리케이션입니다. React, Vue와 같은 프레임워크가 주로 사용되며, 보통 CSR방식을 활용하지만 SSR과 조합하여 사용할 수도 있습니다.

**특징**

- 최초 한 번만 전체 HTML을 로드한 후, JavaScript를 활용하여 필요한 데이터만 갱신하여 화면을 변경합니다.
- 페이지 이동 시 새로운 HTML을 불러오지 않고, 기존 페이지 내에서 콘텐츠를 변경합니다.
- 빠른 사용자 경험을 제공하지만, 초기 로딩 속도가 느리고 SEO 최적화가 어렵다는 단점이 있습니다.

### **MPA- 다중 페이지 애플리케이션**

MPA는 사용자가 새로운 페이지를 요청할 때마다 서버에서 새로운 HTML을 받아와서 렌더링하는 방식입니다.  다중 페이지로 이뤄져있어 변경사항이 있을때마다 서버로 페이지를 요청합니다.

**특징**

- 페이지 이동 시마다 새로운 HTML 문서를 서버에서 받아오기 때문에 초기 로딩 속도가 빠릅니다.
- SSR 방식을 주로 사용하지만, 일부 CSR 방식을 적용할 수도 있습니다.
- 검색 엔진 최적화(SEO)에 유리하지만, 사용자 인터랙션이 많은 경우 성능이 저하될 수 있습니다.

### **CSR- 클라이언트 사이드 렌더링**

CSR은 클라이언트(브라우저)가 초기 요청 시 최소한의 HTML과 JavaScript 파일만 받은 후, JavaScript가 실행되면서 API 요청을 통해 데이터를 가져와 화면을 동적으로 구성하는 방식입니다

**동작 방식**

1. 클라이언트가 서버에 HTML을 요청하면, 기본적인 HTML(index.html)과 JavaScript 파일만 전달됩니다.
2. JavaScript가 실행되면서 API 요청 (fetch, axios)을 통해 데이터를 가져와서 화면을 업데이트합니다.
3. 이후 사용자가 페이지를 이동하면 새 HTML을 받는 게 아니라, JavaScript가 동적으로 DOM을 변경합니다.

**장점**

- 사용자 경험(UX)이 우수하며, 페이지 전환 속도가 빠릅니다.
- 서버 부하가 적어 확장성이 뛰어납니다. (HTML을 계속 생성해서 보내지 않음)

**단점**

- JavaScript 파일 실행 후 화면을 구성해야 하기 때문에 초기 로딩 속도가 느릴 수 있습니다.
- 검색 엔진이 크롤링하기 어렵기 때문에 SEO 최적화가 어렵습니다.

### **SSR -서버 사이드 렌더링**

SSR은 클라이언트 요청이 있을 때 서버에서 데이터베이스를 조회하고, 해당 데이터를 기반으로 완성된 HTML을 생성하여 클라이언트에게 전송하는 방식입니다.

**동작 방식**

1. 클라이언트가 페이지를 요청하면  서버가 데이터베이스에서 데이터를 조회합니다.
2. 조회한 데이터를 기반으로 서버에서 HTML을 미리 생성합니다.
3. 완성된 HTML을 클라이언트에게 전달하여 브라우저에서 즉시 렌더링됩니다.

**장점**

- SEO 최적화가 용이합니다(완성된 HTML을 제공하기 때문).
- 초기 로딩 속도가 빠릅니다.

**단점**

- 페이지 이동 시마다 서버에서 새로운 HTML을 받아야 하므로, 사용자 경험이 저하될 수 있습니다.
- 서버 부하가 증가할 수 있습니다.

### CSR과 SSR 비교 정리

| 구분 | CSR(Client-Side Rendering) | SSR(Server-Side Rendering) |
| --- | --- | --- |
| **렌더링 위치** | 클라이언트(브라우저) | 서버 |
| **데이터 요청 방식** | API 요청 후 JavaScript가 화면을 구성 | 서버에서 HTML 완성 후 클라이언트에 제공 |
| **초기 로딩 속도** | 느림(JavaScript 실행 후 렌더링) | 빠름(완성된 HTML 제공) |
| **SEO(검색 최적화)** | 불리함(HTML이 비어 있음) | 유리함(완성된 HTML 제공) |
| **사용자 인터랙션** | 빠름(필요한 부분만 갱신 가능) | 페이지 이동 시마다 새 HTML 로딩 |

### SPA에서 SSR을 적용할 수 있을까?

SPA는 기본적으로 CSR 방식을 사용하지만, Next.js와 같은 프레임워크를 활용하면 SSR을 적용할 수 있습니다. Next.js는 페이지별로 CSR과 SSR을 선택적으로 적용할 수 있어, SEO가 중요한 페이지에서는 SSR을, 빠른 인터랙션이 필요한 페이지에서는 CSR을 사용할 수 있습니다.

**Next.js에서 SSR을 적용하는 예제**

```jsx
export async function getServerSideProps() {
  const res = await fetch('https://api.example.com/products');
  const products = await res.json();
  return { props: { products } };
}
```

- 사용자가 페이지를 요청할 때마다 서버에서 데이터를 가져와 HTML을 생성하는 SSR 방식입니다.
- 이렇게 하면 SEO 최적화가 가능하면서도 SPA의 장점(빠른 인터랙션)을 유지할 수 있습니다.

### MPA에서 CSR을 적용할 수 있을까?

MPA에서도 일부 페이지에서 CSR을 적용하는 것이 가능합니다.

**예시: MPA + CSR 조합**

- 쇼핑몰 웹사이트에서 **홈/카테고리 페이지는 SSR(검색 최적화 필요)**
- 마이페이지/장바구니는 **CSR(유저별 맞춤 데이터 필요)**

즉, MPA는 무조건 SSR, SPA는 무조건 CSR이 아니라, 프로젝트의 요구사항에 따라 렌더링 방식을 조합하여 사용할 수 있습니다.